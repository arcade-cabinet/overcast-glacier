---
inclusion: always
---

# CI/CD Guidelines

## GitHub Actions Workflows

### CI Pipeline (`ci.yml`)

Triggers on:
- Push to `main`
- Pull requests to `main`
- Manual dispatch

**Jobs**:
1. Biome lint check
2. Vitest unit tests
3. Playwright E2E tests (Chromium)
4. Production build

**Artifacts**:
- Build output (`dist/`) on main branch pushes
- Playwright reports (30 days retention)

### Deploy Pipeline (`deploy.yml`)

Triggers on:
- Push to `main`
- Manual dispatch

**Outputs**:
1. GitHub Pages deployment (web version)
2. Android debug APK (7 days retention)

## Local CI Simulation

Run the full CI pipeline locally:

```bash
# Lint
pnpm exec biome check .

# Unit tests
pnpm run test

# E2E tests (requires Playwright browsers)
pnpm exec playwright install chromium --with-deps
pnpm run test:e2e

# Build
pnpm run build
```

## Android Build

For local Android builds:

```bash
# Sync web assets to Android project
pnpm run cap:sync

# Open in Android Studio
pnpm run cap:open

# Or build from CLI
cd android && ./gradlew assembleDebug
```

## Required Checks

All PRs must pass:
- Biome linting (zero errors)
- Unit test suite
- E2E test suite
- Production build

## Environment

- **Node**: 20.x
- **pnpm**: 10.x
- **Java**: 17 (Zulu distribution) for Android builds
